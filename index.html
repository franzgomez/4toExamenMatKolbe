<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatemÃ¡ticas Kolbe - 4to Grado Fin de AÃ±o</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <div class="header-logos">
                    <img src="assets/img/kolbe-logo.png" alt="Logo Kolbe" class="logo-left">
                    <div class="title-section">
                        <h1>MatemÃ¡ticas Kolbe</h1>
                        <p class="subtitle">4to Grado Fin de AÃ±o</p>
                    </div>
                    <img src="assets/img/kolbe-logo.png" alt="Logo Kolbe" class="logo-right">
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="overallProgress"></div>
                    <span class="progress-text" id="progressText">0% completado</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="main-nav">
            <button class="nav-btn active" data-section="home">ğŸ  Inicio</button>
            <button class="nav-btn" data-section="fractions">ğŸ• Fracciones</button>
            <button class="nav-btn" data-section="decimals">ğŸ’° Decimales</button>
            <button class="nav-btn" data-section="proportions">ğŸ“Š Proporciones</button>
            <button class="nav-btn" data-section="operations">ğŸ”¢ Operaciones</button>
            <button class="nav-btn" data-section="exam">ğŸ“ Examen Final</button>
            <button class="nav-btn" data-section="progress">â­ Mi Progreso</button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Section -->
            <section id="home" class="content-section active">
                <div class="welcome-card">
                    <h2>ğŸŒŸ Â¡Bienvenido a tu aventura matemÃ¡tica! ğŸŒŸ</h2>
                    <p>Explora los mÃ³dulos y completa los desafÃ­os para convertirte en un maestro de las matemÃ¡ticas.</p>
                    
                    <!-- Student Name Input -->
                    <div class="student-name-section">
                        <label for="studentName">Tu nombre completo:</label>
                        <input type="text" id="studentName" placeholder="Escribe tu nombre y apellido" maxlength="50">
                        <button id="saveNameBtn" class="save-name-btn">ğŸ’¾ Guardar</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ†</div>
                            <div class="stat-number" id="totalStars">0</div>
                            <div class="stat-label">Estrellas</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ¯</div>
                            <div class="stat-number" id="totalExercises">0</div>
                            <div class="stat-label">Ejercicios</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ”¥</div>
                            <div class="stat-number" id="streakDays">0</div>
                            <div class="stat-label">DÃ­as seguidos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ“Š</div>
                            <div class="stat-number" id="accuracyRate">0</div>
                            <div class="stat-label">% Aciertos</div>
                        </div>
                    </div>
                </div>

                <div class="modules-grid">
                    <div class="module-card" data-module="fractions">
                        <div class="module-icon">ğŸ•</div>
                        <h3>Fracciones</h3>
                        <p>Aprende sobre partes de un entero, comparaciÃ³n y operaciones</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="fractions"></div>
                            </div>
                            <span class="progress-percent" id="fractions-progress">0%</span>
                        </div>
                        <button class="start-btn">Â¡Empezar!</button>
                    </div>

                    <div class="module-card" data-module="decimals">
                        <div class="module-icon">ğŸ’°</div>
                        <h3>NÃºmeros Decimales</h3>
                        <p>Descubre los decimales y su uso con dinero</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="decimals"></div>
                            </div>
                            <span class="progress-percent" id="decimals-progress">0%</span>
                        </div>
                        <button class="start-btn">Â¡Empezar!</button>
                    </div>

                    <div class="module-card" data-module="proportions">
                        <div class="module-icon">ğŸ“Š</div>
                        <h3>Proporcionalidad</h3>
                        <p>Explora relaciones y tablas de proporcionalidad</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="proportions"></div>
                            </div>
                            <span class="progress-percent" id="proportions-progress">0%</span>
                        </div>
                        <button class="start-btn">Â¡Empezar!</button>
                    </div>

                    <div class="module-card" data-module="operations">
                        <div class="module-icon">ğŸ”¢</div>
                        <h3>Operaciones</h3>
                        <p>Sumas, restas, multiplicaciones y divisiones</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="operations"></div>
                            </div>
                            <span class="progress-percent" id="operations-progress">0%</span>
                        </div>
                        <button class="start-btn">Â¡Empezar!</button>
                    </div>

                    <div class="module-card" data-module="exam">
                        <div class="module-icon">ğŸ“</div>
                        <h3>Examen Final</h3>
                        <p>Demuestra todo lo que has aprendido</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="exam"></div>
                            </div>
                            <span class="progress-percent" id="exam-progress">0%</span>
                        </div>
                        <button class="start-btn">Â¡Empezar!</button>
                    </div>
                </div>

                <!-- Mobile Navigation Buttons -->
                <div class="mobile-nav-buttons">
                    <button class="mobile-btn" id="scrollToTopBtn">â¬† Subir</button>
                    <button class="mobile-btn" id="backToHomeBtn">ğŸ  Inicio</button>
                </div>
            </section>

            <!-- Fractions Section -->
            <section id="fractions" class="content-section">
                <div class="module-header">
                    <h2>ğŸ• MÃ³dulo de Fracciones</h2>
                    <p>Las fracciones representan partes de un entero. Â¡Vamos a explorarlas!</p>
                </div>

                <div class="lesson-container">
                    <div class="lesson-tabs">
                        <button class="tab-btn active" data-tab="fractions-intro">ğŸ“š IntroducciÃ³n</button>
                        <button class="tab-btn" data-tab="fractions-exercises">ğŸ¯ Ejercicios</button>
                        <button class="tab-btn" data-tab="fractions-game">ğŸ® Juego</button>
                    </div>

                    <!-- Fractions Introduction -->
                    <div id="fractions-intro" class="tab-content active">
                        <div class="explanation-card">
                            <h3>Â¿QuÃ© son las fracciones?</h3>
                            <div class="visual-explanation">
                                <div class="fraction-visual">
                                    <div class="pizza-whole" id="pizzaDemo">
                                        <div class="pizza-slice"></div>
                                        <div class="pizza-slice"></div>
                                        <div class="pizza-slice"></div>
                                        <div class="pizza-slice"></div>
                                    </div>
                                    <p>Esta pizza tiene <strong>4 partes iguales</strong></p>
                                    <p>Si comemos <strong>1 parte</strong>, comimos <strong>1/4</strong> de la pizza</p>
                                </div>
                            </div>
                            <div class="concept-list">
                                <h4>Partes de una fracciÃ³n:</h4>
                                <ul>
                                    <li><strong>Numerador:</strong> Las partes que tomamos (arriba)</li>
                                    <li><strong>Denominador:</strong> El total de partes (abajo)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Fractions Exercises -->
                    <div id="fractions-exercises" class="tab-content">
                        <div class="exercise-container" id="fractionExercises">
                            <!-- Exercises will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Fractions Game -->
                    <div id="fractions-game" class="tab-content">
                        <div class="game-container">
                            <h3>ğŸ® Juego de Fracciones</h3>
                            <p>Haz clic en la fracciÃ³n correcta que representa la imagen</p>
                            <div class="game-area" id="fractionGame">
                                <!-- Game content will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

             
            </section>

            <!-- Decimals Section -->
            <section id="decimals" class="content-section">
                <div class="module-header">
                    <h2>ğŸ’° MÃ³dulo de Decimales</h2>
                    <p>Los nÃºmeros decimales nos ayudan a expresar partes mÃ¡s pequeÃ±as, Â¡especialmente con dinero!</p>
                </div>

                <div class="lesson-container">
                    <div class="lesson-tabs">
                        <button class="tab-btn active" data-tab="decimals-intro">ğŸ“š IntroducciÃ³n</button>
                        <button class="tab-btn" data-tab="decimals-exercises">ğŸ¯ Ejercicios</button>
                        <button class="tab-btn" data-tab="decimals-money">ğŸ’° Con Dinero</button>
                    </div>

                    <!-- Decimals Introduction -->
                    <div id="decimals-intro" class="tab-content active">
                        <div class="explanation-card">
                            <h3>Â¿QuÃ© son los decimales?</h3>
                            <div class="visual-explanation">
                                <div class="decimal-visual">
                                    <div class="number-line">
                                        <div class="line"></div>
                                        <div class="marker" style="left: 0%">0</div>
                                        <div class="marker" style="left: 25%">0.25</div>
                                        <div class="marker" style="left: 50%">0.5</div>
                                        <div class="marker" style="left: 75%">0.75</div>
                                        <div class="marker" style="left: 100%">1</div>
                                    </div>
                                    <p>Los decimales representan partes menores que 1</p>
                                </div>
                            </div>
                            <div class="concept-list">
                                <h4>Partes de un decimal:</h4>
                                <ul>
                                    <li><strong>Parte entera:</strong> Los nÃºmeros antes del punto</li>
                                    <li><strong>Punto decimal:</strong> Separa la parte entera de la decimal</li>
                                    <li><strong>Parte decimal:</strong> Los nÃºmeros despuÃ©s del punto</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Decimals Exercises -->
                    <div id="decimals-exercises" class="tab-content">
                        <div class="exercise-container" id="decimalExercises">
                            <!-- Exercises will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Decimals Money -->
                    <div id="decimals-money" class="tab-content">
                        <div class="money-container">
                            <h3>ğŸ’° Decimales con Dinero</h3>
                            <div class="money-examples">
                                <div class="coin-example">
                                    <div class="coin">1Â¢</div>
                                    <p>1 centavo = 0.01 euros</p>
                                </div>
                                <div class="coin-example">
                                    <div class="coin">5Â¢</div>
                                    <p>5 centavos = 0.05 euros</p>
                                </div>
                                <div class="coin-example">
                                    <div class="coin">10Â¢</div>
                                    <p>10 centavos = 0.10 euros</p>
                                </div>
                            </div>
                            <div class="exercise-container" id="moneyExercises">
                                <!-- Money exercises will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

            
            </section>

            <!-- Proportions Section -->
            <section id="proportions" class="content-section">
                <div class="module-header">
                    <h2>ğŸ“Š MÃ³dulo de Proporcionalidad</h2>
                    <p>La proporcionalidad nos ayuda a entender relaciones entre cantidades</p>
                </div>

                <div class="lesson-container">
                    <div class="lesson-tabs">
                        <button class="tab-btn active" data-tab="proportions-intro">ğŸ“š IntroducciÃ³n</button>
                        <button class="tab-btn" data-tab="proportions-exercises">ğŸ¯ Ejercicios</button>
                        <button class="tab-btn" data-tab="proportions-tables">ğŸ“‹ Tablas</button>
                    </div>

                    <!-- Proportions Introduction -->
                    <div id="proportions-intro" class="tab-content active">
                        <div class="explanation-card">
                            <h3>Â¿QuÃ© es la proporcionalidad?</h3>
                            <div class="visual-explanation">
                                <div class="proportion-example">
                                    <h4>Ejemplo: Precio de manzanas</h4>
                                    <div class="proportion-table">
                                        <table>
                                            <tr><th>Manzanas</th><th>Precio</th></tr>
                                            <tr><td>1</td><td>2â‚¬</td></tr>
                                            <tr><td>2</td><td>4â‚¬</td></tr>
                                            <tr><td>3</td><td>6â‚¬</td></tr>
                                            <tr><td>4</td><td>8â‚¬</td></tr>
                                        </table>
                                    </div>
                                    <p>Cada manzana cuesta 2â‚¬. La <strong>constante de proporcionalidad</strong> es 2.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Proportions Exercises -->
                    <div id="proportions-exercises" class="tab-content">
                        <div class="exercise-container" id="proportionExercises">
                            <!-- Exercises will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Proportions Tables -->
                    <div id="proportions-tables" class="tab-content">
                        <div class="tables-container">
                            <h3>ğŸ“‹ Completar Tablas de Proporcionalidad</h3>
                            <div class="exercise-container" id="tableExercises">
                                <!-- Table exercises will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

              
            </section>

         <section id="operations" class="content-section">
    <h2>ğŸ”¢ Operaciones</h2>

    <div class="lesson-tabs">
        <button class="tab-btn" data-tab="op-sum">â• Sumas</button>
        <button class="tab-btn" data-tab="op-sub">â– Restas</button>
        <button class="tab-btn" data-tab="op-mult">âœ–ï¸ Multiplicaciones</button>
        <button class="tab-btn" data-tab="op-div">â— Divisiones</button>
        <button class="tab-btn" data-tab="op-game-missing">ğŸ” Completar</button>
        <button class="tab-btn" data-tab="op-game-error">âš ï¸ Detectar Error</button>
    </div>

    <div class="lesson-container">
        <div id="op-sum" class="tab-content"></div>
        <div id="op-sub" class="tab-content"></div>
        <div id="op-mult" class="tab-content"></div>
        <div id="op-div" class="tab-content"></div>
        <div id="op-game-missing" class="tab-content"></div>
        <div id="op-game-error" class="tab-content"></div>
    </div>

    <div class="mobile-nav-buttons">
        <button class="mobile-btn" id="scrollToTopBtn">â¬† Subir</button>
        <button class="mobile-btn" id="backToHomeBtn">ğŸ  Inicio</button>
    </div>
</section>


            <!-- Exam Section -->
            <section id="exam" class="content-section">
                <div class="module-header">
                    <h2>ğŸ“ Examen Final</h2>
                    <p>Demuestra todo lo que has aprendido en este examen completo</p>
                </div>

                <div class="exam-container">
                    <div class="exam-info">
                        <h3>ğŸ“‹ InformaciÃ³n del Examen</h3>
                        <ul>
                            <li>â° Tiempo lÃ­mite: 15 minutos</li>
                            <li>â“ 10 preguntas aleatorias</li>
                            <li>ğŸ“Š Incluye todos los temas estudiados</li>
                            <li>â­ ObtÃ©n tu calificaciÃ³n final</li>
                        </ul>
                        <div class="exam-controls">
                            <button id="startExamBtn" class="start-exam-btn">ğŸš€ Comenzar Examen</button>
                            <button id="practiceExamBtn" class="practice-exam-btn">ğŸ“š Examen de PrÃ¡ctica</button>
                        </div>
                    </div>

                    <div class="exam-area" id="examArea" style="display: none;">
                        <div class="exam-header">
                            <div class="exam-timer">
                                <span>â° Tiempo restante: </span>
                                <span id="examTimer">15:00</span>
                            </div>
                            <div class="exam-progress">
                                <span>Pregunta </span>
                                <span id="currentQuestion">1</span>
                                <span> de </span>
                                <span id="totalQuestions">10</span>
                            </div>
                        </div>
                        
                        <div class="exam-question" id="examQuestion">
                            <!-- Exam questions will be generated by JavaScript -->
                        </div>

                        <div class="exam-controls">
                            <button id="prevQuestionBtn" class="nav-question-btn" disabled>â¬… Anterior</button>
                            <button id="nextQuestionBtn" class="nav-question-btn">Siguiente â¡</button>
                            <button id="submitExamBtn" class="submit-exam-btn" style="display: none;">âœ… Entregar Examen</button>
                        </div>
                    </div>

                    <div class="exam-results" id="examResults" style="display: none;">
                        <!-- Exam results will be shown here -->
                    </div>
                </div>

                <!-- Mobile Navigation Buttons -->
                <div class="mobile-nav-buttons">
                    <button class="mobile-btn" id="scrollToTopBtn">â¬† Subir</button>
                    <button class="mobile-btn" id="backToHomeBtn">ğŸ  Inicio</button>
                </div>
            </section>

            <!-- Progress Section -->
            <section id="progress" class="content-section">
                <div class="progress-header">
                    <h2>â­ Mi Progreso</h2>
                    <p>Â¡Mira todo lo que has logrado!</p>
                </div>

                <div class="progress-dashboard">
                    <!-- Overall Progress -->
                    <div class="progress-overview">
                        <h3>ğŸ“Š Progreso General</h3>
                        <div class="overall-stats">
                            <div class="stat-item">
                                <span class="stat-label">Progreso total:</span>
                                <span class="stat-value" id="overallProgressText">0%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Ejercicios completados:</span>
                                <span class="stat-value" id="totalExercisesCompleted">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Respuestas correctas:</span>
                                <span class="stat-value" id="totalCorrectAnswers">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Tasa de aciertos:</span>
                                <span class="stat-value" id="overallAccuracy">0%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Module Progress -->
                    <div class="modules-progress">
                        <h3>ğŸ“ˆ Progreso por MÃ³dulo</h3>
                        <div class="module-progress-grid" id="moduleProgressGrid">
                            <!-- Module progress will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Achievements -->
                    <div class="achievement-grid">
                        <div class="achievement-card">
                            <div class="achievement-icon">ğŸ†</div>
                            <h3>Logros Desbloqueados</h3>
                            <div class="badges-container" id="badgesContainer">
                                <!-- Badges will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="achievement-card">
                            <div class="achievement-icon">ğŸ“Š</div>
                            <h3>EstadÃ­sticas Detalladas</h3>
                            <div class="stats-list" id="detailedStats">
                                <!-- Stats will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="achievement-card">
                            <div class="achievement-icon">ğŸ’¾</div>
                            <h3>Exportar y Gestionar</h3>
                            <div class="export-controls">
                                <button class="export-btn" id="exportProgress">ğŸ“¥ Descargar Progreso PDF</button>
                                <button class="sync-btn" id="syncProgress">â˜ï¸ Sincronizar Online</button>
                                <button class="reset-btn" id="resetProgress">ğŸ”„ Reiniciar Todo</button>
                            </div>
                            <div class="sync-status" id="syncStatus"></div>
                        </div>
                    </div>
                </div>

              
            </section>
        </main>

        <!-- Exercise Modal -->
        <div class="modal" id="exerciseModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="modal-body" id="modalBody">
                    <!-- Modal content will be inserted by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Feedback Modal -->
        <div class="modal" id="feedbackModal">
            <div class="modal-content">
                <div class="feedback-content" id="feedbackContent">
                    <!-- Feedback content will be inserted by JavaScript -->
                </div>
                <button class="continue-btn" id="continueBtn">Continuar</button>
            </div>
        </div>

        <!-- Name Required Modal -->
        <div class="modal" id="nameRequiredModal">
            <div class="modal-content">
                <div class="name-required-content">
                    <h3>ğŸ“ Nombre Requerido</h3>
                    <p>Por favor, ingresa tu nombre completo antes de continuar:</p>
                    <input type="text" id="nameModalInput" placeholder="Tu nombre y apellido" maxlength="50">
                    <div class="name-modal-buttons">
                        <button id="saveNameModalBtn" class="save-name-btn">ğŸ’¾ Guardar y Continuar</button>
                        <button id="cancelNameModalBtn" class="cancel-btn">âŒ Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal" id="confirmationModal">
            <div class="modal-content">
                <div class="confirmation-content">
                    <h3 id="confirmationTitle">âš ï¸ Confirmar AcciÃ³n</h3>
                    <p id="confirmationMessage">Â¿EstÃ¡s seguro de que deseas realizar esta acciÃ³n?</p>
                    <div class="confirmation-buttons">
                        <button id="confirmYesBtn" class="confirm-btn">âœ… SÃ­</button>
                        <button id="confirmNoBtn" class="cancel-btn">âŒ No</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio elements -->
    <audio id="correctSound" preload="auto">
        <source src="assets/sounds/correct.mp3" type="audio/mpeg">
    </audio>
    <audio id="wrongSound" preload="auto">
        <source src="assets/sounds/wrong.mp3" type="audio/mpeg">
    </audio>
    <audio id="bgMusic" loop>
        <source src="assets/sounds/bg-music.mp3" type="audio/mpeg">
    </audio>

    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/exerciseEngine.js"></script>
    <script src="js/examEngine.js"></script>
    <script src="js/app.js"></script>
    <script src="js/config.js"></script>
<script src="js/utils.js"></script>
<script src="js/exerciseEngine.js"></script>
<script src="js/examEngine.js"></script>
<script src="js/operationsEngine.js"></script>
<script src="js/app.js"></script>
</body>
</html>
