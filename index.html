<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matem√°ticas Kolbe - 4to Grado Fin de A√±o</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <div class="header-logos">
                    <img src="assets/img/kolbe-logo.png" alt="Logo Kolbe" class="logo-left">
                    <div class="title-section">
                        <h1>Matem√°ticas Kolbe</h1>
                        <p class="subtitle">4to Grado Fin de A√±o</p>
                    </div>
                    <img src="assets/img/kolbe-logo.png" alt="Logo Kolbe" class="logo-right">
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="overallProgress"></div>
                    <span class="progress-text" id="progressText">0% completado</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="main-nav">
            <button class="nav-btn active" data-section="home">üè† Inicio</button>
            <button class="nav-btn" data-section="fractions">üçï Fracciones</button>
            <button class="nav-btn" data-section="decimals">üí∞ Decimales</button>
            <button class="nav-btn" data-section="proportions">üìä Proporciones</button>
            <button class="nav-btn" data-section="operations">üî¢ Operaciones</button>
            <button class="nav-btn" data-section="exam">üìù Examen Final</button>
            <button class="nav-btn" data-section="progress">‚≠ê Mi Progreso</button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Section -->
            <section id="home" class="content-section active">
                <div class="welcome-card">
                    <h2>üåü ¬°Bienvenido a tu aventura matem√°tica! üåü</h2>
                    <p>Explora los m√≥dulos y completa los desaf√≠os para convertirte en un maestro de las matem√°ticas.</p>
                    
                    <!-- Student Name Input -->
                    <div class="student-name-section">
                        <label for="studentName">Tu nombre completo:</label>
                        <input type="text" id="studentName" placeholder="Escribe tu nombre y apellido" maxlength="50">
                        <button id="saveNameBtn" class="save-name-btn">üíæ Guardar</button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üèÜ</div>
                            <div class="stat-number" id="totalStars">0</div>
                            <div class="stat-label">Estrellas</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üéØ</div>
                            <div class="stat-number" id="totalExercises">0</div>
                            <div class="stat-label">Ejercicios</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üî•</div>
                            <div class="stat-number" id="streakDays">0</div>
                            <div class="stat-label">D√≠as seguidos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-number" id="accuracyRate">0</div>
                            <div class="stat-label">% Aciertos</div>
                        </div>
                    </div>
                </div>

                <div class="modules-grid">
                    <div class="module-card" data-module="fractions">
                        <div class="module-icon">üçï</div>
                        <h3>Fracciones</h3>
                        <p>Aprende sobre partes de un entero, comparaci√≥n y operaciones</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="fractions"></div>
                            </div>
                            <span class="progress-percent" id="fractions-progress">0%</span>
                        </div>
                        <button class="start-btn">¬°Empezar!</button>
                    </div>

                    <div class="module-card" data-module="decimals">
                        <div class="module-icon">üí∞</div>
                        <h3>N√∫meros Decimales</h3>
                        <p>Descubre los decimales y su uso con dinero</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="decimals"></div>
                            </div>
                            <span class="progress-percent" id="decimals-progress">0%</span>
                        </div>
                        <button class="start-btn">¬°Empezar!</button>
                    </div>

                    <div class="module-card" data-module="proportions">
                        <div class="module-icon">üìä</div>
                        <h3>Proporcionalidad</h3>
                        <p>Explora relaciones y tablas de proporcionalidad</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="proportions"></div>
                            </div>
                            <span class="progress-percent" id="proportions-progress">0%</span>
                        </div>
                        <button class="start-btn">¬°Empezar!</button>
                    </div>

                    <div class="module-card" data-module="operations">
                        <div class="module-icon">üî¢</div>
                        <h3>Operaciones</h3>
                        <p>Sumas, restas, multiplicaciones y divisiones</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="operations"></div>
                            </div>
                            <span class="progress-percent" id="operations-progress">0%</span>
                        </div>
                        <button class="start-btn">¬°Empezar!</button>
                    </div>

                    <div class="module-card" data-module="exam">
                        <div class="module-icon">üìù</div>
                        <h3>Examen Final</h3>
                        <p>Demuestra todo lo que has aprendido</p>
                        <div class="module-progress">
                            <div class="progress-bar small">
                                <div class="progress-fill" data-progress="exam"></div>
                            </div>
                            <span class="progress-percent" id="exam-progress">0%</span>
                        </div>
                        <button class="start-btn">¬°Empezar!</button>
                    </div>
                </div>

                <!-- Mobile Navigation Buttons -->
                <div class="mobile-nav-buttons">
                    <button class="mobile-btn" id="scrollToTopBtn">‚¨Ü Subir</button>
                    <button class="mobile-btn" id="backToHomeBtn">üè† Inicio</button>
                </div>
            </section>

            <!-- Fractions Section -->
            <section id="fractions" class="content-section">
                <div class="module-header">
                    <h2>üçï M√≥dulo de Fracciones</h2>
                    <p>Las fracciones representan partes de un entero. ¬°Vamos a explorarlas!</p>
                </div>

                <div class="lesson-container">
                    <div class="lesson-tabs">
                        <button class="tab-btn active" data-tab="fractions-intro">üìö Introducci√≥n</button>
                        <button class="tab-btn" data-tab="fractions-exercises">üéØ Ejercicios</button>
                        <button class="tab-btn" data-tab="fractions-game">üéÆ Juego</button>
                    </div>

                    <!-- Fractions Introduction -->
                    <div id="fractions-intro" class="tab-content active">
                        <div class="explanation-card">
                            <h3>¬øQu√© son las fracciones?</h3>
                            <div class="visual-explanation">
                                <div class="fraction-visual">
                                    <div class="pizza-whole" id="pizzaDemo">
                                        <div class="pizza-slice"></div>
                                        <div class="pizza-slice"></div>
                                        <div class="pizza-slice"></div>
                                        <div class="pizza-slice"></div>
                                    </div>
                                    <p>Esta pizza tiene <strong>4 partes iguales</strong></p>
                                    <p>Si comemos <strong>1 parte</strong>, comimos <strong>1/4</strong> de la pizza</p>
                                </div>
                            </div>
                            <div class="concept-list">
                                <h4>Partes de una fracci√≥n:</h4>
                                <ul>
                                    <li><strong>Numerador:</strong> Las partes que tomamos (arriba)</li>
                                    <li><strong>Denominador:</strong> El total de partes (abajo)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Fractions Exercises -->
                    <div id="fractions-exercises" class="tab-content">
                        <div class="exercise-container" id="fractionExercises">
                            <!-- Exercises will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Fractions Game -->
                    <div id="fractions-game" class="tab-content">
                        <div class="game-container">
                            <h3>üéÆ Juego de Fracciones</h3>
                            <p>Haz clic en la fracci√≥n correcta que representa la imagen</p>
                            <div class="game-area" id="fractionGame">
                                <!-- Game content will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

             
            </section>

            <!-- Decimals Section -->
            <section id="decimals" class="content-section">
                <div class="module-header">
                    <h2>üí∞ M√≥dulo de Decimales</h2>
                    <p>Los n√∫meros decimales nos ayudan a expresar partes m√°s peque√±as, ¬°especialmente con dinero!</p>
                </div>

                <div class="lesson-container">
                    <div class="lesson-tabs">
                        <button class="tab-btn active" data-tab="decimals-intro">üìö Introducci√≥n</button>
                        <button class="tab-btn" data-tab="decimals-exercises">üéØ Ejercicios</button>
                        <button class="tab-btn" data-tab="decimals-money">üí∞ Con Dinero</button>
                    </div>

                    <!-- Decimals Introduction -->
                    <div id="decimals-intro" class="tab-content active">
                        <div class="explanation-card">
                            <h3>¬øQu√© son los decimales?</h3>
                            <div class="visual-explanation">
                                <div class="decimal-visual">
                                    <div class="number-line">
                                        <div class="line"></div>
                                        <div class="marker" style="left: 0%">0</div>
                                        <div class="marker" style="left: 25%">0.25</div>
                                        <div class="marker" style="left: 50%">0.5</div>
                                        <div class="marker" style="left: 75%">0.75</div>
                                        <div class="marker" style="left: 100%">1</div>
                                    </div>
                                    <p>Los decimales representan partes menores que 1</p>
                                </div>
                            </div>
                            <div class="concept-list">
                                <h4>Partes de un decimal:</h4>
                                <ul>
                                    <li><strong>Parte entera:</strong> Los n√∫meros antes del punto</li>
                                    <li><strong>Punto decimal:</strong> Separa la parte entera de la decimal</li>
                                    <li><strong>Parte decimal:</strong> Los n√∫meros despu√©s del punto</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Decimals Exercises -->
                    <div id="decimals-exercises" class="tab-content">
                        <div class="exercise-container" id="decimalExercises">
                            <!-- Exercises will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Decimals Money -->
                    <div id="decimals-money" class="tab-content">
                        <div class="money-container">
                            <h3>üí∞ Decimales con Dinero</h3>
                            <div class="money-examples">
                                <div class="coin-example">
                                    <div class="coin">1¬¢</div>
                                    <p>1 centavo = 0.01 euros</p>
                                </div>
                                <div class="coin-example">
                                    <div class="coin">5¬¢</div>
                                    <p>5 centavos = 0.05 euros</p>
                                </div>
                                <div class="coin-example">
                                    <div class="coin">10¬¢</div>
                                    <p>10 centavos = 0.10 euros</p>
                                </div>
                            </div>
                            <div class="exercise-container" id="moneyExercises">
                                <!-- Money exercises will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

            
            </section>

            <!-- Proportions Section -->
            <section id="proportions" class="content-section">
                <div class="module-header">
                    <h2>üìä M√≥dulo de Proporcionalidad</h2>
                    <p>La proporcionalidad nos ayuda a entender relaciones entre cantidades</p>
                </div>

                <div class="lesson-container">
                    <div class="lesson-tabs">
                        <button class="tab-btn active" data-tab="proportions-intro">üìö Introducci√≥n</button>
                        <button class="tab-btn" data-tab="proportions-exercises">üéØ Ejercicios</button>
                        <button class="tab-btn" data-tab="proportions-tables">üìã Tablas</button>
                    </div>

                    <!-- Proportions Introduction -->
                    <div id="proportions-intro" class="tab-content active">
                        <div class="explanation-card">
                            <h3>¬øQu√© es la proporcionalidad?</h3>
                            <div class="visual-explanation">
                                <div class="proportion-example">
                                    <h4>Ejemplo: Precio de manzanas</h4>
                                    <div class="proportion-table">
                                        <table>
                                            <tr><th>Manzanas</th><th>Precio</th></tr>
                                            <tr><td>1</td><td>2‚Ç¨</td></tr>
                                            <tr><td>2</td><td>4‚Ç¨</td></tr>
                                            <tr><td>3</td><td>6‚Ç¨</td></tr>
                                            <tr><td>4</td><td>8‚Ç¨</td></tr>
                                        </table>
                                    </div>
                                    <p>Cada manzana cuesta 2‚Ç¨. La <strong>constante de proporcionalidad</strong> es 2.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Proportions Exercises -->
                    <div id="proportions-exercises" class="tab-content">
                        <div class="exercise-container" id="proportionExercises">
                            <!-- Exercises will be generated by JavaScript -->
                        </div>
                    </div>

                    <!-- Proportions Tables -->
                    <div id="proportions-tables" class="tab-content">
                        <div class="tables-container">
                            <h3>üìã Completar Tablas de Proporcionalidad</h3>
                            <div class="exercise-container" id="tableExercises">
                                <!-- Table exercises will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

              
            </section>

            <!-- Operations Section -->
            <section id="operations" class="content-section">
                <div class="module-header">
                    <h2>üî¢ M√≥dulo de Operaciones</h2>
                    <p>Practica sumas, restas, multiplicaciones y divisiones paso a paso</p>
                </div>

                <div class="lesson-container">
                    <div class="lesson-tabs">
                        <button class="tab-btn active" data-tab="operations-sums">‚ûï Sumas y Restas</button>
                        <button class="tab-btn" data-tab="operations-mult">‚úñÔ∏è Multiplicaciones</button>
                        <button class="tab-btn" data-tab="operations-div">‚ûó Divisiones</button>
                        <button class="tab-btn" data-tab="operations-games">üéÆ Juegos</button>
                    </div>

                    <!-- Sums and Subtractions -->
                    <div id="operations-sums" class="tab-content active">
                        <div class="operations-container">
                            <h3>‚ûï Sumas y Restas en "Casita"</h3>
                            <div class="operation-selector">
                                <button class="operation-btn" data-type="sum-3">Sumas 3 cifras</button>
                                <button class="operation-btn" data-type="sum-4">Sumas 4 cifras</button>
                                <button class="operation-btn" data-type="sub-3">Restas 3 cifras</button>
                                <button class="operation-btn" data-type="sub-4">Restas 4 cifras</button>
                            </div>
                            <div class="exercise-container" id="sumsExercises">
                                <!-- Sums exercises will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Multiplications -->
                    <div id="operations-mult" class="tab-content">
                        <div class="operations-container">
                            <h3>‚úñÔ∏è Multiplicaciones</h3>
                            <div class="operation-selector">
                                <button class="operation-btn" data-type="mult-1">Por 1 cifra</button>
                                <button class="operation-btn" data-type="mult-2">Por 2 cifras</button>
                            </div>
                            <div class="exercise-container" id="multExercises">
                                <!-- Multiplication exercises will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Divisions -->
                    <div id="operations-div" class="tab-content">
                        <div class="operations-container">
                            <h3>‚ûó Divisiones</h3>
                            <div class="operation-selector">
                                <button class="operation-btn" data-type="div-exact">Exactas</button>
                                <button class="operation-btn" data-type="div-rest">Con resto</button>
                            </div>
                            <div class="exercise-container" id="divExercises">
                                <!-- Division exercises will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>

                    <!-- Games -->
                    <div id="operations-games" class="tab-content">
                        <div class="games-container">
                            <h3>üéÆ Juegos de Operaciones</h3>
                            <div class="game-selector">
                                <div class="game-card" data-game="complete-missing">
                                    <h4>üîç Completar Faltantes</h4>
                                    <p>Encuentra el n√∫mero que falta en la operaci√≥n</p>
                                    <button class="play-btn">Jugar</button>
                                </div>
                                <div class="game-card" data-game="find-error">
                                    <h4>üïµÔ∏è Detectar Error</h4>
                                    <p>Encuentra el error en las operaciones</p>
                                    <button class="play-btn">Jugar</button>
                                </div>
                            </div>
                            <div class="game-area" id="operationsGame">
                                <!-- Game content will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile Navigation Buttons -->
                <div class="mobile-nav-buttons">
                    <button class="mobile-btn" id="scrollToTopBtn">‚¨Ü Subir</button>
                    <button class="mobile-btn" id="backToHomeBtn">üè† Inicio</button>
                </div>
            </section>

            <!-- Exam Section -->
            <section id="exam" class="content-section">
                <div class="module-header">
                    <h2>üìù Examen Final</h2>
                    <p>Demuestra todo lo que has aprendido en este examen completo</p>
                </div>

                <div class="exam-container">
                    <div class="exam-info">
                        <h3>üìã Informaci√≥n del Examen</h3>
                        <ul>
                            <li>‚è∞ Tiempo l√≠mite: 15 minutos</li>
                            <li>‚ùì 10 preguntas aleatorias</li>
                            <li>üìä Incluye todos los temas estudiados</li>
                            <li>‚≠ê Obt√©n tu calificaci√≥n final</li>
                        </ul>
                        <div class="exam-controls">
                            <button id="startExamBtn" class="start-exam-btn">üöÄ Comenzar Examen</button>
                            <button id="practiceExamBtn" class="practice-exam-btn">üìö Examen de Pr√°ctica</button>
                        </div>
                    </div>

                    <div class="exam-area" id="examArea" style="display: none;">
                        <div class="exam-header">
                            <div class="exam-timer">
                                <span>‚è∞ Tiempo restante: </span>
                                <span id="examTimer">15:00</span>
                            </div>
                            <div class="exam-progress">
                                <span>Pregunta </span>
                                <span id="currentQuestion">1</span>
                                <span> de </span>
                                <span id="totalQuestions">10</span>
                            </div>
                        </div>
                        
                        <div class="exam-question" id="examQuestion">
                            <!-- Exam questions will be generated by JavaScript -->
                        </div>

                        <div class="exam-controls">
                            <button id="prevQuestionBtn" class="nav-question-btn" disabled>‚¨Ö Anterior</button>
                            <button id="nextQuestionBtn" class="nav-question-btn">Siguiente ‚û°</button>
                            <button id="submitExamBtn" class="submit-exam-btn" style="display: none;">‚úÖ Entregar Examen</button>
                        </div>
                    </div>

                    <div class="exam-results" id="examResults" style="display: none;">
                        <!-- Exam results will be shown here -->
                    </div>
                </div>

                <!-- Mobile Navigation Buttons -->
                <div class="mobile-nav-buttons">
                    <button class="mobile-btn" id="scrollToTopBtn">‚¨Ü Subir</button>
                    <button class="mobile-btn" id="backToHomeBtn">üè† Inicio</button>
                </div>
            </section>

            <!-- Progress Section -->
            <section id="progress" class="content-section">
                <div class="progress-header">
                    <h2>‚≠ê Mi Progreso</h2>
                    <p>¬°Mira todo lo que has logrado!</p>
                </div>

                <div class="progress-dashboard">
                    <!-- Overall Progress -->
                    <div class="progress-overview">
                        <h3>üìä Progreso General</h3>
                        <div class="overall-stats">
                            <div class="stat-item">
                                <span class="stat-label">Progreso total:</span>
                                <span class="stat-value" id="overallProgressText">0%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Ejercicios completados:</span>
                                <span class="stat-value" id="totalExercisesCompleted">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Respuestas correctas:</span>
                                <span class="stat-value" id="totalCorrectAnswers">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Tasa de aciertos:</span>
                                <span class="stat-value" id="overallAccuracy">0%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Module Progress -->
                    <div class="modules-progress">
                        <h3>üìà Progreso por M√≥dulo</h3>
                        <div class="module-progress-grid" id="moduleProgressGrid">
                            <!-- Module progress will be populated by JavaScript -->
                        </div>
                    </div>

                    <!-- Achievements -->
                    <div class="achievement-grid">
                        <div class="achievement-card">
                            <div class="achievement-icon">üèÜ</div>
                            <h3>Logros Desbloqueados</h3>
                            <div class="badges-container" id="badgesContainer">
                                <!-- Badges will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="achievement-card">
                            <div class="achievement-icon">üìä</div>
                            <h3>Estad√≠sticas Detalladas</h3>
                            <div class="stats-list" id="detailedStats">
                                <!-- Stats will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="achievement-card">
                            <div class="achievement-icon">üíæ</div>
                            <h3>Exportar y Gestionar</h3>
                            <div class="export-controls">
                                <button class="export-btn" id="exportProgress">üì• Descargar Progreso PDF</button>
                                <button class="sync-btn" id="syncProgress">‚òÅÔ∏è Sincronizar Online</button>
                                <button class="reset-btn" id="resetProgress">üîÑ Reiniciar Todo</button>
                            </div>
                            <div class="sync-status" id="syncStatus"></div>
                        </div>
                    </div>
                </div>

              
            </section>
        </main>

        <!-- Exercise Modal -->
        <div class="modal" id="exerciseModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="modal-body" id="modalBody">
                    <!-- Modal content will be inserted by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Feedback Modal -->
        <div class="modal" id="feedbackModal">
            <div class="modal-content">
                <div class="feedback-content" id="feedbackContent">
                    <!-- Feedback content will be inserted by JavaScript -->
                </div>
                <button class="continue-btn" id="continueBtn">Continuar</button>
            </div>
        </div>

        <!-- Name Required Modal -->
        <div class="modal" id="nameRequiredModal">
            <div class="modal-content">
                <div class="name-required-content">
                    <h3>üìù Nombre Requerido</h3>
                    <p>Por favor, ingresa tu nombre completo antes de continuar:</p>
                    <input type="text" id="nameModalInput" placeholder="Tu nombre y apellido" maxlength="50">
                    <div class="name-modal-buttons">
                        <button id="saveNameModalBtn" class="save-name-btn">üíæ Guardar y Continuar</button>
                        <button id="cancelNameModalBtn" class="cancel-btn">‚ùå Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal" id="confirmationModal">
            <div class="modal-content">
                <div class="confirmation-content">
                    <h3 id="confirmationTitle">‚ö†Ô∏è Confirmar Acci√≥n</h3>
                    <p id="confirmationMessage">¬øEst√°s seguro de que deseas realizar esta acci√≥n?</p>
                    <div class="confirmation-buttons">
                        <button id="confirmYesBtn" class="confirm-btn">‚úÖ S√≠</button>
                        <button id="confirmNoBtn" class="cancel-btn">‚ùå No</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio elements -->
    <audio id="correctSound" preload="auto">
        <source src="assets/sounds/correct.mp3" type="audio/mpeg">
    </audio>
    <audio id="wrongSound" preload="auto">
        <source src="assets/sounds/wrong.mp3" type="audio/mpeg">
    </audio>
    <audio id="bgMusic" loop>
        <source src="assets/sounds/bg-music.mp3" type="audio/mpeg">
    </audio>

    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/app.js"></script>
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/exerciseEngine.js"></script>
    <script src="js/examEngine.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
